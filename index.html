<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grupos de Investigación</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h1 class="mb-4 text-center">Gestión de Grupos de Investigación</h1>

  <!-- Listado de grupos (GET) -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <h2 class="h5">Listado de Grupos</h2>
      <button id="btnCargar" class="btn btn-primary mb-3">Cargar Grupos</button>
      <ul id="listaGrupos" class="list-group"></ul>
    </div>
  </div>

  <!-- Formulario registrar docente (POST) -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <h2 class="h5">Registrar Docente</h2>
      <form id="formDocente">
        <!-- Campo nombre docente -->
        <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre docente" required>

        <!-- Campo formación académica -->
        <input type="text" class="form-control mb-2" name="formacion" placeholder="Formación académica" required>

        <!-- Campo horario de atención -->
        <input type="text" class="form-control mb-2" name="horario" placeholder="Horario de atención" required>

        <!-- Campo grupo -->
        <select class="form-control mb-2" name="grupo" required>
          <option value="COMBA I+D">COMBA I+D</option>
          <option value="GIEIAM">GIEIAM</option>
        </select>

        <button type="submit" class="btn btn-success">Registrar</button>
      </form>
    </div>
  </div>

  <!-- Formulario estudiante -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <h2 class="h5">Registrar Estudiante</h2>
      <form id="formEstudiante">
        <input type="text" class="form-control mb-2" name="nombre" placeholder="Nombre estudiante" required>
        <input type="email" class="form-control mb-2" name="correo" placeholder="Correo electrónico" required>
        <input type="text" class="form-control mb-2" name="carrera" placeholder="Carrera" required>
        <button type="submit" class="btn btn-info">Registrar Estudiante</button>
      </form>
    </div>
  </div>

  <!-- Formulario actividad semillero -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <h2 class="h5">Registrar Actividad de Semillero</h2>
      <form id="formActividad">
        <input type="text" class="form-control mb-2" name="titulo" placeholder="Título de la actividad" required>
        <textarea class="form-control mb-2" name="descripcion" placeholder="Descripción" required></textarea>
        <input type="date" class="form-control mb-2" name="fecha" required>
        <button type="submit" class="btn btn-warning">Registrar Actividad</button>
      </form>
    </div>
  </div>

  <script>
    const lista = document.getElementById("listaGrupos");
    const btnCargar = document.getElementById("btnCargar");
    const formDocente = document.getElementById("formDocente");
    const formEstudiante = document.getElementById("formEstudiante");
    const formActividad = document.getElementById("formActividad");

    // -------------------- GET: Cargar Grupos --------------------
    btnCargar.addEventListener("click", async () => {
      try {
        // Usamos JSONPlaceholder como simulación de API
        const resp = await fetch("https://jsonplaceholder.typicode.com/users");
        const data = await resp.json();

        // Limpiar lista antes de cargar
        lista.innerHTML = "";

        // Mostrar solo 2 grupos de ejemplo
        data.slice(0, 2).forEach(grupo => {
          const li = document.createElement("li");
          li.className = "list-group-item";
          li.textContent = `Grupo: ${grupo.company.name} - Área: ${grupo.company.bs}`;
          lista.appendChild(li);
        });
      } catch (error) {
        alert("Error al cargar grupos");
      }
    });

    // -------------------- POST: Registrar Docente --------------------
    formDocente.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formDocente);
      const docente = Object.fromEntries(formData.entries());

      try {
        const resp = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(docente)
        });
        const result = await resp.json();
        alert("Docente registrado con éxito:\n" + JSON.stringify(result, null, 2));
        formDocente.reset();
      } catch (error) {
        alert("Error al registrar docente");
      }
    });

    // -------------------- POST: Registrar Estudiante --------------------
    formEstudiante.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formEstudiante);
      const estudiante = Object.fromEntries(formData.entries());

      try {
        const resp = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(estudiante)
        });
        const result = await resp.json();
        alert("Estudiante registrado:\n" + JSON.stringify(result, null, 2));
        formEstudiante.reset();
      } catch (error) {
        alert("Error al registrar estudiante");
      }
    });

    // -------------------- POST: Registrar Actividad --------------------
    formActividad.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(formActividad);
      const actividad = Object.fromEntries(formData.entries());

      try {
        const resp = await fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(actividad)
        });
        const result = await resp.json();
        alert("Actividad registrada:\n" + JSON.stringify(result, null, 2));
        formActividad.reset();
      } catch (error) {
        alert("Error al registrar actividad");
      }
    });
  </script>
</body>
</html>
